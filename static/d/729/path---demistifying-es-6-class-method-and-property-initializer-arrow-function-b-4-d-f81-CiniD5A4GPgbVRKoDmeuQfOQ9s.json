{"data":{"markdownRemark":{"html":"<p>Welcome back to another episode of react junkie's blog post. Today I'll be talking about meth crystal meth ice and how to\nreplicate the perfect process to produce the most immaculate blue sky just like Jesse Pinkman.</p>\n<p>Did that get your attention? :)</p>\n<p>Actually no. Today I'll be talking about a much more exciting topic: the difference between es6 class methods and arrow functions.</p>\n<p>I encountered this at work when two of my colleagues (let's call them Lill and Woic to preserve anonymity) implemented class methods\nin two different styles. Compare the printQuality method in the following code snippets:</p>\n<h4>Lill: Standard es6 class method</h4>\n<div class=\"gatsby-highlight\" data-language=\"jsx\">\n      <pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>Component<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MethLab</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n    \n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n            methQuality<span class=\"token punctuation\">:</span> <span class=\"token string\">'blueSky'</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token comment\">// manually bind \"this\" context of printQuality function</span>\n        <span class=\"token comment\">// to the instance of MethLab being constructed</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>printQuality <span class=\"token operator\">=</span> <span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>printQuality<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token comment\">// Use the standard es6 class method syntax</span>\n    <span class=\"token function\">printQuality</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>methQuality<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<h4>Woic: Property initializer with arrow function</h4>\n<div class=\"gatsby-highlight\" data-language=\"jsx\">\n      <pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>Component<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MethLab</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n    \n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n           methQuality<span class=\"token punctuation\">:</span> <span class=\"token string\">'blueSky'</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token comment\">// Use property initializer combined with arrow function</span>\n    <span class=\"token function-variable function\">printQuality</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>methQuality<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>Can you guess the output of each implementation? If you've been using react\nfor a while, you would guess that they would both output 'bluesky' and you would be\nright. Based on that guess, you would further extrapolate that they are both\ndoing the same thing and are indifferent from each other. It's a fair and logical guess, but you would be wrong.</p>\n<p>The answer lies in the es5 translation of these syntactic sugar. Let me explain through code:</p>\n<h4>Lill: Standard es6 class method in es5</h4>\n<div class=\"gatsby-highlight\" data-language=\"jsx\">\n      <pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">MethLab</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span>\n\n    <span class=\"token comment\">// manually bind \"this\" context of printQuality function</span>\n    <span class=\"token comment\">// to the instance of MethLab being constructed</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>printQuality <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>printQuality<span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span>\n\nMethLab<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">printQuality</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token function\">printQuality</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>methQuality<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<h4>Woic: Property initializer with arrow function in es5</h4>\n<div class=\"gatsby-highlight\" data-language=\"jsx\">\n      <pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">MethLab</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span> \n    \n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">printQuality</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>methQuality<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<p>The above are simplified versions of the actual babel6 output (you can see\nthe full translations using the kick-ass babel6 repl editor\n<a href=\"https://babeljs.io/repl/\" target=\"_blank\" rel=\"nofollow\">here</a>)</p>\n<p>The key point here is that the standard es6 class method translates to\na method on the function prototype, whereas the arrow function translates\nto a method in the constructor function.</p>\n<p>What does this mean? Traditionally in es5, you would only declare instance\nproperties in the constructor function. These are properties that are\nspecific to the instance and are not shared across instances. For example constructor arguments.\nThese are created every time for each instance and hence are not very efficient.</p>\n<p>To improve performance, you would declare shared properties and methods on the\nfunction prototype. These will be created once for the function and then shared across all\ninstances. I would normally declare methods on the function prototype; properties not so much. </p>\n<p>It makes sense to share methods across instances for performance reasons and keep instance properties\nin the constructor function. This leads to the conclusion that the es6 standard class method syntax\n(Lill's way) is preferable to the property initializer arrow function syntax.</p>\n<p>Hopefully by understanding what es6 does under the hood you can now better decide\nhow to declare your class methods. I know many developers are using the property\ninitializer arrow function syntax because it's convenient, albeit unaware of what's\nreally happening under the hood.</p>\n<hr>\n<h2>Other news</h2>\n<p>I'll be attending <a href=\"http://ndcsydney.com/\" target=\"_blank\" rel=\"nofollow\">NDC Sydney</a> on 3-5 August. If you are around, please say hello otherwise\nit will be quite a lonely conference for me :(</p>\n<p>I have also organised a reading group which will take place on Thu 25 Aug. The pick is <a href=\"https://www.nostarch.com/hemingway\" target=\"_blank\" rel=\"nofollow\">\"If Hemingway Wrote Javascript\"\nby Angus Croll</a>. Please reach out to me if you would like to join!</p>\n<p>Until next time, cowabunga.</p>\n<hr>","timeToRead":3,"frontmatter":{"date":"July 30, 2016","path":"/demistifying-es6-class-method-and-property-initializer-arrow-function","title":"Demistifying es6 class method and property initializer arrow function","files":null,"tags":["react","es6","es 6","class","classes","method","property","initializer","arrow","function"]}}},"pageContext":{}}